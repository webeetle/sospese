(this.webpackJsonpsospese=this.webpackJsonpsospese||[]).push([[0],{153:function(e,t,a){e.exports=a(220)},220:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(12),r=a.n(i),l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function c(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),function(){var e=document.createElement("a");e.classList.add("update-notification"),e.setAttribute("href","#"),e.innerHTML="Update is available. Click here to install.",e.addEventListener("click",(function(e){e.preventDefault(),window.location.reload()})),document.querySelector("body").appendChild(e)}(),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var s=a(291),m=a(292),u=a(135),p=Object(u.a)({palette:{primary:{main:"#62c79d",light:"#95face",dark:"#2c966f",contrastText:"#fff"},secondary:{main:"#404ea7",light:"#C5CAE9",dark:"#002677",contrastText:"#fff"},background:{default:"#404ea7"}},overrides:{MuiPaper:{rounded:{borderRadius:10}},MuiButton:{contained:{borderRadius:8,boxShadow:"none"}}}}),d=a(8),g=d.a.model("SnackBarStore",{open:d.a.optional(d.a.boolean,!1),message:d.a.maybe(d.a.string),variant:d.a.optional(d.a.string,"info"),anchorOrigin:d.a.optional(d.a.maybe(d.a.frozen()),{vertical:"top",horizontal:"right"})}).actions((function(e){return{feedback:function(t,a){e.open=!0,e.message=a,e.variant=t,setTimeout(e.close,5e3)},close:function(){e.open=!1}}})),f=a(32),h=a.n(f),v="AIzaSyCPghe4Rnh2hPXSqvWe_pdNxl-JDOxrG3Q",b="https://api.sospese.io/api";var E=d.a.model("TypePointStore",{categories:d.a.maybe(d.a.array(d.a.frozen({})))}).actions((function(e){return{setCategories:function(t){var a=[];t.map((function(e){var t={label:e.name.toUpperCase(),value:e.name};a.push(t)})),e.categories=a},getCategories:function(){Array.isArray(e.categories)&&0!==e.categories.length||h.a.get("".concat(b,"/categories")).then((function(t){var a=t.data;return e.setCategories(a)}))}}})),x=d.a.model("UtilityStore",{snackbar:g,typePoint:E}),y=d.a.model("HomeStore",{donations:d.a.maybe(d.a.number),points:d.a.maybe(d.a.number)}).actions((function(e){return{successStats:function(t){var a=t.data;e.donations=a.donations,e.points=a.points},getStats:function(){h.a.get("".concat(b,"/points/stats")).then(e.successStats).catch(console.log)}}})),N=d.a.model("MapStore",{lat:d.a.maybe(d.a.number),lng:d.a.maybe(d.a.number),points:d.a.maybe(d.a.optional(d.a.array(d.a.frozen({})),[]))}).actions((function(e){return{successNearPoints:function(t){var a=t.data;e.points=a},getNearPoints:function(){h.a.post("".concat(b,"/points/near"),{lat:e.lat,lng:e.lng,distance:5e3}).then(e.successNearPoints).catch(console.log)},setLocations:function(t){var a=t.lat,n=t.lng;e.lat=a,e.lng=n}}})),k=d.a.model("PointStore",{point:d.a.maybe(d.a.frozen({})),selfie:d.a.maybe(d.a.optional(d.a.union(d.a.null,d.a.string),null))}).actions((function(e){return{setPoint:function(t){e.point=t},getPoint:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};0===Object.keys(e.point).length||a?h.a.get("".concat(b,"/points/").concat(t)).then((function(t){var a=t.data;e.setPoint(a),n(e.point)})).catch(console.log):n(e.point)},reportingPoint:function(e,t){h.a.post("".concat(b,"/points/report"),e).then(t)},vote:function(t,a){h.a.post("".concat(b,"/points/vote/").concat(e.point._id),t).then((function(t){t.data;var n=JSON.parse(localStorage.getItem("vote"));n||(n={}),n[e.point._id]=!0,localStorage.setItem("vote",JSON.stringify(n)),a()}))},setSelfie:function(t){e.selfie=t},setFrozenFile:function(t){e.frozenFile=t},saveDonation:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=t._id;delete t._id,e.donation=t,h.a.post("".concat(b,"/points/donation/").concat(n),t).then((function(e){e.data;a()}))},shareDonation:function(){navigator.share({files:e.frozenFile?[e.frozenFile]:[],text:e.donation&&e.donation.message?e.donation.message+" #selfiesospeso #sospese":"#selfiesospeso #sospese Ho appena donato su: ",url:"https://sospese.io"}),e.donation=null,e.file=null,e.frozenFile=null}}})),O=d.a.model("PagesStore",{home:y,map:N,point:k}),C=d.a.model("Store",{pages:O,utility:x}),S=a(13),j=a(15),w=a(82),z=a(34),T=a(269),W=Object(T.a)((function(e){var t,a;return{root:{},mapSection:{height:"30vh",backgroundImage:"url('map.svg')",backgroundRepeat:"none",backgroundSize:"cover",display:"flex",alignItems:"center",justifyContent:"center","& .MuiButton-root.MuiButton-contained":{border:"3px solid ".concat(e.palette.secondary.light),borderRadius:30,padding:"8px 20px",color:e.palette.secondary.main,fontWeight:700,background:"#fff"}},buttonSection:(a={flex:1,justifyContent:"center",display:"flex"},Object(z.a)(a,e.breakpoints.up("sm"),{"margin-top":"-40px"}),Object(z.a)(a,"& > .actionButton",(t={width:"100%"},Object(z.a)(t,e.breakpoints.up("sm"),{width:"600px"}),Object(z.a)(t,"& .MuiButton-root",Object(z.a)({background:"#fff",flex:1,fontWeight:700,padding:"15px 0"},e.breakpoints.up("sm"),{padding:7,"border-radius":50,border:"3px solid #C5CAE9"})),Object(z.a)(t,"& .MuiButton-label",{display:"flex","flex-direction":"column","justify-content":"center"}),Object(z.a)(t,"& .divider",Object(z.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"})),t)),a),howWorks:{padding:"30px",color:"#fff","& > .containerMobileStepper":{marginTop:20},"& > .containerMobileStepper .slide":{color:e.palette.secondary.main,minHeight:220,background:"#fff",padding:"35px 15px",textAlign:"center","& > p":{marginTop:20,textTransform:"uppercase",fontWeight:700,"& > span":{color:e.palette.primary.main}},"& > img":{height:50}},"& > .containerMobileStepper .MuiMobileStepper-root":{justifyContent:"center",background:"#fff"}},counters:{background:e.palette.primary.main,color:"#fff",display:"flex","& > div":{flex:1,padding:20,textAlign:"center"},"& > div:nth-child(1)":{borderRight:"1px solid ".concat(e.palette.secondary.main)},"& > div:nth-child(2)":{borderLeft:"1px solid ".concat(e.palette.secondary.main)}},missionSection:{padding:30,"& > .paper":{padding:30,"& > .body":{color:"#757575",lineHeight:"1.2em",fontSize:"16px",marginTop:20},"& > .title":{fontWeight:700,display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.secondary.main,fontSize:30,"& > span":{marginLeft:10}}}},containerBox:{padding:30,"& > .body":{color:"#757575",lineHeight:"1.2em",fontSize:"16px",marginTop:20},"& > .alignment":{textAlign:"center"},"& > .paper":{marginBottom:20,padding:30}}}})),I=a(221),A=a(274),P=a(79),R=a(294),B=a(296),F=a(275),M=a(222),_=a(273),L=a(58),D=a(31),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{initial:0,maxStep:0},t=Object(n.useState)(e),a=Object(D.a)(t,2),o=a[0],i=a[1];return{step:o.step?o.step:o.initial,maxStep:o.maxStep,set:i,reset:function(){return i(e.initial)},next:function(){return i((function(e){var t=e.step?e.step+1:e.initial+1;return Object(L.a)({},e,{step:t})}))},prev:function(){return i((function(e){var t=e.step?e.step-1:e.initial-1;return Object(L.a)({},e,{step:t})}))}}},H=a(120),V=a.n(H),G=Object(j.f)(Object(S.b)("store")(Object(S.c)((function(e){var t=W(),a=U({initial:0,maxStep:3}),i=e.history,r=e.store.pages.home;return Object(n.useEffect)((function(){r.getStats()}),[]),o.a.createElement("div",{className:t.root},o.a.createElement("div",{className:t.mapSection},o.a.createElement(I.a,{onClick:function(){return i.push("/search")},variant:"contained",startIcon:o.a.createElement(_.a,null)},"cerca punto")),o.a.createElement("div",{className:t.buttonSection},o.a.createElement(A.a,{className:"actionButton",variant:"text",color:"secondary"},o.a.createElement(I.a,{onClick:function(){return i.push("/donations")}},o.a.createElement("div",null,o.a.createElement("img",{src:"icons/heart.svg",width:40})),"ho donato"),o.a.createElement("div",{style:{width:20},className:"divider"}),o.a.createElement(I.a,{onClick:function(){return i.push("/point/reporting")}},o.a.createElement("div",null,o.a.createElement("img",{src:"icons/flag.svg",width:40})),"segnala punto"))),o.a.createElement("div",{className:t.howWorks},o.a.createElement(P.a,{align:"center"},o.a.createElement("strong",null,"COME FUNZIONA")),o.a.createElement(R.a,{smUp:!0},o.a.createElement("div",{className:"containerMobileStepper"},o.a.createElement(V.a,{axis:"x",index:a.step,onChangeIndex:function(e){e>a.step?a.next():a.prev()},enableMouseEvents:!0},o.a.createElement("div",{className:"slide"},o.a.createElement("img",{src:"icons/map.svg"}),o.a.createElement(P.a,null,"Vai sulla ",o.a.createElement("span",null,"mappa"),", inserisci il tuo indirizzo oppure attiva la geolocalizzazione")),o.a.createElement("div",{className:"slide"},o.a.createElement("img",{src:"icons/pin_status.svg"}),o.a.createElement(P.a,null,"Trova i ",o.a.createElement("span",null,"punti di ritiro e raccolta"))),o.a.createElement("div",{className:"slide"},o.a.createElement("img",{src:"icons/donare_ritirare.svg"}),o.a.createElement(P.a,null,"Raggiungi il punto con le dovute precauzioni e scegli di ",o.a.createElement("span",null,"donare o di ritirare")))),o.a.createElement(B.a,{steps:a.maxStep,position:"static",variant:"dots",activeStep:a.step}))),o.a.createElement(R.a,{xsDown:!0},o.a.createElement("div",{className:"containerMobileStepper"},o.a.createElement(F.a,{container:!0,spacing:4},o.a.createElement(F.a,{item:!0,xs:12,sm:12,md:4,lg:4},o.a.createElement(M.a,{className:"paper",style:{height:"100%"}},o.a.createElement("div",{className:"".concat(t.containerBox," slide")},o.a.createElement("div",{className:"alignment"},o.a.createElement("img",{src:"icons/map.svg",width:60})),o.a.createElement(P.a,null,"Vai sulla ",o.a.createElement("span",null,"mappa"),", inserisci il tuo indirizzo oppure attiva la geolocalizzazione")))),o.a.createElement(F.a,{item:!0,xs:12,sm:12,md:4,lg:4},o.a.createElement(M.a,{className:"paper",style:{height:"100%"}},o.a.createElement("div",{className:"".concat(t.containerBox," slide")},o.a.createElement("div",{className:"alignment"},o.a.createElement("img",{src:"icons/pin_status.svg",width:60})),o.a.createElement(P.a,null,"Trova i ",o.a.createElement("span",null,"punti di ritiro e raccolta"))))),o.a.createElement(F.a,{item:!0,xs:12,sm:12,md:4,lg:4},o.a.createElement(M.a,{className:"paper",style:{height:"100%"}},o.a.createElement("div",{className:"".concat(t.containerBox," slide")},o.a.createElement("div",{className:"alignment"},o.a.createElement("img",{src:"icons/heart.svg",width:60})),o.a.createElement(P.a,null,"Raggiungi il punto con le dovute precauzioni e scegli di ",o.a.createElement("span",null,"donare o di ritirare"))))))))),o.a.createElement("div",{className:t.counters},o.a.createElement("div",null,o.a.createElement(P.a,{variant:"h4"},r.points),o.a.createElement(P.a,{variant:"p"},"PUNTI SOSPESI")),o.a.createElement("div",null,o.a.createElement(P.a,{variant:"h4"},r.donations),o.a.createElement(P.a,{variant:"p"},"DONATORI"))),o.a.createElement(F.a,{container:!0,spacing:0},o.a.createElement(F.a,{item:!0,xs:12,sm:12,md:6,lg:6},o.a.createElement("div",{className:t.missionSection},o.a.createElement(M.a,{rounded:!0,className:"paper"},o.a.createElement(P.a,{className:"title",variant:"h3",align:"center"},o.a.createElement("img",{src:"icons/cesto.svg"})," ",o.a.createElement("span",null,"Cos'\xe8")),o.a.createElement(P.a,{className:"body"},"Sospese \xe8 un progetto che mette in contatto persone che vogliono donare con persone che hanno bisogno di sostegno. Un contenitore di segnalazioni di punti di raccolta e di ritiro di \u201ccose sospese\u201d, beni e servizi acquistati e lasciati a disposizione di chi ne ha bisogno.")))),o.a.createElement(F.a,{item:!0,xs:12,sm:12,md:6,lg:6},o.a.createElement("div",{className:t.missionSection},o.a.createElement(M.a,{rounded:!0,className:"paper"},o.a.createElement(P.a,{className:"title",variant:"h3",align:"center"},o.a.createElement("img",{src:"icons/sos.svg"})," ",o.a.createElement("span",null,"Mission")),o.a.createElement(P.a,{className:"body"},"Sospese \xe8 un progetto che mette in contatto persone che vogliono donare con persone che hanno bisogno di sostegno. Un contenitore di segnalazioni di punti di raccolta e di ritiro di \u201ccose sospese\u201d, beni e servizi acquistati e lasciati a disposizione di chi ne ha bisogno."))))))})))),q=a(278),Z=a(279),J=a(280),K=a(295),Q=a(281),X=a(283),$=Object(T.a)((function(e){return{root:{flexGrow:1,minHeight:"100%",margin:"0 aut  o",background:e.palette.secondary.main,paddingTop:104,overflowX:"hidden"},toolbar:{color:"#fff",padding:"20px"},menuButton:{position:"absolute",top:10,right:10},logoContainer:{flex:1,flexFlow:"row",textAlign:"center","& > p":{fontWeight:700}},logo:{height:35,paddingLeft:10},menuContainer:{width:"100vw",paddingTop:25},closeMenuButton:{position:"absolute",top:10,right:10,color:e.palette.secondary.main},listMenu:{marginTop:30},listMenuText:{color:e.palette.secondary.main,fontWeight:700,textTransform:"uppercase",textAlign:"center"},footer:{background:e.palette.primary.main,color:"#fff",padding:"30px 30px 10px 30px",textAlign:"center","& a":{color:e.palette.secondary.main,textDecoration:"none"},"& > .grazie":{fontSize:"30px",fontWeight:700,textTransform:"uppercase"},"& > .andratuttobene":{fontSize:"18px",fontWeight:700,textTransform:"uppercase"},"& > .copyright":{marginTop:50,fontSize:"14px"}}}})),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(n.useState)(e),a=Object(D.a)(t,2),o=a[0],i=a[1];return{on:o,set:i,reset:function(){return i(e)},toggle:function(){return i((function(e){return!e}))}}},ee=a(223),te=a(276),ae=a(277),ne=[{name:"home",href:"/"},{name:"cerca un punto",href:"/search"},{name:"ho donato",href:"/donations"},{name:"segnala un punto",href:"/point/reporting"},{name:"supporters",href:"/supporters"}],oe=Object(j.f)((function(e){var t=$(),a=e.history;return o.a.createElement("div",{className:t.menuContainer},o.a.createElement(F.a,{container:!0},o.a.createElement(F.a,{item:!0,xs:12,justify:"center"},o.a.createElement("div",{className:t.logoContainer},o.a.createElement("img",{alt:"sospese",src:"/logo.svg",className:t.logo}),o.a.createElement(P.a,{color:"secondary"},"DOVE IL SEGNALE SEI TU"))),o.a.createElement(F.a,{item:!0,xs:12},o.a.createElement(ae.a,{className:t.listMenu},ne.map((function(n){return o.a.createElement(ee.a,{key:n.name,button:!0,onClick:function(){return t=n.href,a.push(t),void e.handleClick();var t}},o.a.createElement(te.a,null,o.a.createElement(P.a,{className:t.listMenuText},n.name)))}))))))})),ie=Object(j.f)((function(e){var t=$(),a=Y(!1),n=e.history;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:t.root},o.a.createElement(q.a,{position:"fixed",elevation:0},o.a.createElement(Z.a,{className:t.toolbar},o.a.createElement(J.a,{className:t.menuButton,edge:"start",color:"inherit","aria-label":"menu"},o.a.createElement(Q.a,{onClick:a.toggle})),o.a.createElement("div",{className:t.logoContainer},o.a.createElement("img",{alt:"sospese",src:"/logo.svg",className:t.logo,onClick:function(){n.push("/")}}),o.a.createElement(P.a,null,"DOVE IL SEGNALE SEI TU")))),o.a.createElement(K.a,{anchor:"right",open:a.on,onClose:a.toggle},o.a.createElement(J.a,{className:t.closeMenuButton,onClick:a.toggle},o.a.createElement(X.a,null)),o.a.createElement(oe,{handleClick:a.toggle})),e.children),o.a.createElement("div",{className:t.footer},o.a.createElement("img",{src:"/icons/sos_footer.svg",height:90}),o.a.createElement(P.a,{className:"grazie"},"GRAZIE!"),o.a.createElement(P.a,{className:"andratuttobene"},"#andr\xe0tuttobene"),o.a.createElement(P.a,{className:"copyright"},"\xa9 2020 ",o.a.createElement("a",{rel:"noopener noreferrer",href:"https://webeetle.com",target:"_blank"},"weBeetle srl"))))})),re=Object(T.a)((function(e){return{root:{display:"flex",flexFlow:"column",padding:30,justifyContent:"center",background:"#EFF7FF",minHeight:"calc(100vh - 382px)"}}})),le=a(61),ce=a.n(le),se=a(76),me=Object(T.a)((function(e){return{root:{position:"relative"},title:{color:e.palette.secondary.main,fontWeight:700,marginBottom:20,fontSize:18,textTransform:"uppercase"},google:{width:"100%"},label:{margin:"20px auto",display:"block"},geoButton:{borderRadius:0,color:"#fff"},listResult:{position:"absolute",width:"100%",zIndex:2,background:"#fff"}}})),ue=a(44),pe=a(286),de=a(284);function ge(e,t,a,n){return o.a.createElement(M.a,{elevation:0},o.a.createElement(ae.a,{className:e.listResult},a.map((function(e){return o.a.createElement(ee.a,{key:e.description,button:!0,onClick:function(t){return n(e,t)}},o.a.createElement(te.a,null,e.description))}))))}var fe=function(e){return e.label=e.placeholder,e.fullWidth=!0,delete e.placeholder,o.a.createElement(de.a,e)},he=function(e){var t=e.onCoordsFound,a=me(),n={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},i=navigator.geolocation;return o.a.createElement("div",{className:a.root},o.a.createElement(P.a,{variant:"h5",className:a.title,align:"center"},"Cerca un punto"),o.a.createElement("div",{className:a.google},o.a.createElement(ue.a,{debounce:500,placeholder:"Inserisci indirizzo",renderSuggestions:function(e,t,n){return ge(a,0,t,n)},autocompletionRequest:{componentRestrictions:{country:"it"}},renderInput:fe,onSelect:function(){var e=Object(se.a)(ce.a.mark((function e(a){var n,o;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ue.b)(a.place_id);case 3:return n=e.sent,e.next=6,Object(ue.c)(n[0]);case 6:o=e.sent,t(o),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()})),i?o.a.createElement(o.a.Fragment,null,o.a.createElement(P.a,{className:a.label,align:"center",variant:"label"},"oppure"),o.a.createElement(I.a,{fullWidth:!0,className:a.geoButton,color:"primary",variant:"contained",startIcon:o.a.createElement(pe.a,null),onClick:function(){i.getCurrentPosition((function(e){var a=e.coords;return t({lat:a.latitude,lng:a.longitude})}),console.log,n)}},"Qui Vicino")):null)},ve=Object(j.f)(Object(S.b)("store")(Object(S.c)((function(e){var t=re(),a=e.history,n=e.store.pages.map;return o.a.createElement("div",{className:t.root},o.a.createElement(he,{onCoordsFound:function(e){n.setLocations(e),a.push("/map")}}))})))),be=Object(T.a)((function(e){return{root:{background:"#fff"},titlePage:{color:e.palette.secondary.main,fontWeight:700,padding:"10px 20px"},map:{height:"30vh",width:"100vw"},listItem:{marginBottom:0,padding:0,"& > ul":{padding:0,margin:0},"& hr":{margin:0}},item:{padding:"15px","& .title":{color:e.palette.secondary.main,fontWeight:700},"& .distance":{color:"#a9a9a9",fontSize:".9em",marginBottom:10},"& .address, & .contacts":{fontSize:".9em"}}}})),Ee=a(122),xe=a.n(Ee),ye=function(e){var t="";switch(e){case"cesto":t="/icons/cesto_point.svg";break;case"libro":t="/icons/libreria_point.svg";break;case"caffe":t="/icons/bar_point.svg";break;case"carrello":t="/icons/carrello_point.svg";break;case"centro_raccolta":t="/icons/centro_raccolta_point.svg";break;case"farmaco":t="/icons/farmaco_point.svg";break;default:t="/icons/cesto_point.svg"}return t},Ne={key:v,language:"it",region:"it"},ke=Object(j.f)(Object(S.b)("store")(Object(S.c)((function(e){var t=be(),a=e.history,i=e.store.pages,r=i.map,l=i.point,c={lat:r.lat,lng:r.lng};Object(n.useEffect)((function(){r.lat&&r.lng?r.getNearPoints():a.push("/search")}),[]);return o.a.createElement("div",{className:t.root},o.a.createElement(P.a,{variant:"h6",className:t.titlePage},"Punti Sospesi"),o.a.createElement("div",{className:t.map},o.a.createElement(xe.a,{bootstrapURLKeys:Ne,defaultCenter:c,defaultZoom:13},r.points.map((function(e){var t=ye(e.pointType),n=Object(D.a)(e.location.coordinates,2),i=n[0],r=n[1];return o.a.createElement("img",{key:e._id,onClick:function(){l.setPoint(e),a.push("/point/".concat(e._id))},src:t,lat:r,lng:i})})),o.a.createElement("img",{src:"/icons/sono_qui.svg",lat:r.lat,lng:r.lng}))),o.a.createElement("div",{className:t.listItem},o.a.createElement(ae.a,null,r.points.length>0?r.points.map((function(e){var n=ye(e.pointType);return o.a.createElement(o.a.Fragment,{key:e._id},o.a.createElement(ee.a,{className:t.item},o.a.createElement(F.a,{container:!0,spacing:1},o.a.createElement(F.a,{item:!0,xs:2,sm:2,md:1,lg:1,style:{display:"flex",justifyContent:"center"}},o.a.createElement("img",{src:n,style:{width:40}})),o.a.createElement(F.a,{item:!0,xs:6,sm:6,md:9,lg:9},o.a.createElement(P.a,{className:"title"},e.name),o.a.createElement(P.a,{className:"distance"},"Distanza: ",(e.dist.calculated/1e3).toFixed(2)," KM"),o.a.createElement(P.a,{className:"address"},e.address),o.a.createElement(P.a,{className:"contacts"},e.contacts?e.contacts.join(" - "):"")),o.a.createElement(F.a,{item:!0,xs:4,sm:4,md:2,lg:2},o.a.createElement(I.a,{fullWidth:!0,size:"small",variant:"contained",color:"secondary",onClick:function(){l.setPoint(e),a.push("/donations")}},"Ho Donato"),o.a.createElement(I.a,{fullWidth:!0,size:"small",variant:"contained",color:"primary",style:{marginTop:10},onClick:function(){l.setPoint(e),a.push("/point/".concat(e._id))}},"Dettaglio")))),o.a.createElement("hr",null))})):null)))})))),Oe=Object(T.a)((function(e){return{root:{},titlePage:{background:"#FFF",color:e.palette.secondary.main,fontWeight:700,padding:"10px 20px"},imgHighlights:{height:"45vh",position:"relative",backgroundSize:"cover!important",backgroundRepeat:"no-repeat!important"},donationCount:{position:"absolute",display:"flex",alignItems:"center",color:"#fff",fontWeight:700,bottom:0,minHeight:50,width:"100%",backgroundColor:"rgba(98, 199, 157, .7)"},detail:{padding:"10px 30px 30px 30px","& .icon":{width:"100%"},"& .title":{color:"#fff",fontWeight:700},"& .distance":{color:"#fff"},"& > .paper":{fontSize:".8em",marginTop:10,padding:30,color:"#757575","& > .body":{lineHeight:"1.2em",fontSize:"16px",marginTop:20},"& > .title":{fontWeight:700,display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.secondary.main,fontSize:30,"& > span":{marginLeft:10}}}},noteTitle:{marginTop:20,color:e.palette.secondary.main},notes:{fontSize:"1em",border:"1px solid #e6e6e6",padding:5},likes:{background:e.palette.primary.main,color:"#fff",display:"flex","& .MuiIconButton-root":{color:"#fff"},"& .MuiIconButton-root.Mui-disabled":{color:"#a9a9a9"},"& > div":{flex:1,padding:10,textAlign:"center"},"& > div:nth-child(1)":{backgroundColor:"#98C367",borderRight:"1px solid ".concat(e.palette.secondary.main)},"& > div:nth-child(2)":{backgroundColor:"#C76262",borderLeft:"1px solid ".concat(e.palette.secondary.main)}}}})),Ce=a(287),Se=a(288),je=Object(j.f)(Object(S.b)("store")(Object(S.c)((function(e){var t=Oe(),a=e.history,i=e.match,r=e.store.pages.point,l=Object(n.useState)(""),c=Object(D.a)(l,2),s=c[0],m=c[1],u=function(){return!!localStorage.getItem("vote")&&!!JSON.parse(localStorage.getItem("vote"))[r.point._id]};Object(n.useEffect)((function(){r.getPoint(i.params.id,!1,(function(e){var t="url('https://maps.googleapis.com/maps/api/streetview?size=800x800&location=".concat(encodeURI(e.address.replace('"',"").replace("&","").replace("'","")),"&key=").concat(v,"')");m(t)}))}),[]);var p=r.point.pointType?ye(r.point.pointType):"";return o.a.createElement("div",{className:t.root},o.a.createElement(P.a,{variant:"h6",className:t.titlePage,onClick:function(){return a.push("/map")}},"Ritorna ai punti Sospesi"),o.a.createElement("div",{className:t.imgHighlights,style:{background:"".concat(s)}},o.a.createElement("div",{className:t.donationCount},o.a.createElement(F.a,{container:!0,alignItems:"center",spacing:2},o.a.createElement(F.a,{item:!0,xs:1}),o.a.createElement(F.a,{item:!0,xs:2},o.a.createElement("img",{src:"/icons/heart_w.svg"})),o.a.createElement(F.a,{item:!0,xs:4},r.point.totalDonations," Donazioni Raggiunte"),o.a.createElement(F.a,{item:!0,xs:4},o.a.createElement(I.a,{fullWidth:!0,size:"small",variant:"contained",color:"secondary",onClick:function(){a.push("/donations")}},"Ho Donato"))))),o.a.createElement("div",{className:t.detail},o.a.createElement(F.a,{container:!0,spacing:2},o.a.createElement(F.a,{item:!0,xs:2},o.a.createElement("img",{src:p,className:"icon"})),o.a.createElement(F.a,{item:!0,xs:10},o.a.createElement(P.a,{className:"title"},r.point.name),r.point.dist?o.a.createElement(P.a,{className:"distance"},"Distanza: ",(r.point.dist.calculated/1e3).toFixed(2)," KM"):null)),o.a.createElement(M.a,{rounded:!0,className:"paper"},o.a.createElement(P.a,{className:"address"},r.point.address),o.a.createElement(P.a,{className:"contacts"},"Contatti: ",r.point.contacts?r.point.contacts.join(" - "):""),o.a.createElement(P.a,{className:t.noteTitle},"Note"),o.a.createElement("div",{className:t.notes},r.point.note))),o.a.createElement("div",{className:t.likes},o.a.createElement("div",null,o.a.createElement(P.a,{variant:"h4"},o.a.createElement(J.a,{disabled:u(),onClick:function(){r.vote({type:"up"},(function(){r.getPoint(i.params.id,!0)}))}},o.a.createElement(Ce.a,null))),o.a.createElement(P.a,{variant:"p"},r.point.thumbsUp," CONFERME")),o.a.createElement("div",null,o.a.createElement(P.a,{variant:"h4"},o.a.createElement(J.a,{disabled:u(),onClick:function(){r.vote({type:"down"},(function(){r.getPoint(i.params.id,!0)}))}},o.a.createElement(Se.a,null))),o.a.createElement(P.a,{variant:"p"},r.point.thumbsDown," SMENTITE"))))})))),we=Object(T.a)((function(e){return{root:{},title:{fontSize:"24px",color:e.palette.primary.main,textAlign:"center",fontWeight:700},container:{position:"relative",margin:"15px 30px",padding:30,color:"#757575"},submit:{textAlign:"right","& > button":{margin:"0 5px",fontWeight:700}},google:{width:"100%"},label:{margin:"20px auto",display:"block"},geoButton:{borderRadius:0,color:"#fff"},listResult:{position:"absolute",zIndex:2,width:"calc(100% - 60px)",border:"1px solid ".concat(e.palette.primary.main),background:"#fff"}}})),ze=a(35),Te=a(66),We=function(e){var t=e.input,a=t.name,n=t.onChange,i=t.onBlur,r=t.value,l=Object(Te.a)(t,["name","onChange","onBlur","value"]),c=e.meta,s=e.fullWidth,m=e.readOnly,u=void 0!==m&&m,p=e.variant,d=e.disabled,g=void 0!==d&&d,f=e.type,h=void 0===f?"text":f,v=e.highlighted,b=void 0!==v&&v,E=e.InputProps,x=void 0===E?{}:E,y=e.onClick,N=e.disableUnderline,k=void 0!==N&&N,O=e.label,C=e.placeholder,S=e.rowsMax,j=e.multiline,w=e.rows,z=e.uppercase,T=void 0!==z&&z,W=e.lowercase,I=void 0!==W&&W,A=e.hidden,P=void 0!==A&&A,R=e.id,B=Object(Te.a)(e,["input","meta","fullWidth","readOnly","variant","disabled","type","highlighted","InputProps","onClick","disableUnderline","label","placeholder","rowsMax","multiline","rows","uppercase","lowercase","hidden","id"]);return"hidden"===h&&delete c.error,P?null:o.a.createElement(de.a,{id:R,type:h,label:O,placeholder:C,name:a,helperText:c.touched?c.error:void 0,error:c.error&&c.touched||b,value:B.value?B.value:r,fullWidth:s,variant:p,onChange:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];T&&(t[0].target.value=t[0].target.value.toUpperCase()),I&&(t[0].target.value=t[0].target.value.toLowerCase()),n&&n.apply(void 0,t),B.onChange&&B.onChange.apply(B,t)},onBlur:function(){i&&i.apply(void 0,arguments),B.onBlur&&B.onBlur.apply(B,arguments)},disabled:g,rows:w,rowsMax:S,multiline:j,inputProps:Object(L.a)({},l),InputProps:Object(L.a)({},x,{className:j?"textarea-default":x?x.className:"",readOnly:u,disableUnderline:k,type:h}),onClick:g?function(){}:y})},Ie=a(231),Ae=a(230),Pe=a(232),Re=a(289),Be=a(227),Fe=a(228),Me=function(e){var t=e.input,a=t.name,n=t.value,i=t.onChange,r=e.native,l=e.fullWidth,c=e.variant,s=e.rowsData,m=e.meta,u=e.render,p=void 0!==u&&u,d=e.disabled,g=void 0!==d&&d,f=Object(Te.a)(e,["input","native","fullWidth","variant","rowsData","meta","render","disabled"]),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?o.a.createElement("option",{value:e.value},e.label):"function"===typeof p?p(e):o.a.createElement(Re.a,{key:"nativeSelect_"+e.value,value:e.value},e.label)};return o.a.createElement(Be.a,{variant:c,fullWidth:l,error:m.error&&m.touched},f.placeholder?o.a.createElement(Pe.a,null," ",f.placeholder," "):null,o.a.createElement(Ae.a,Object.assign({value:n,native:r,name:a,disabled:g},function(){var e={};return"outlined"===c&&(e.input=o.a.createElement(Ie.a,{fullWidth:!0,labelWidth:9.5*f.placeholder.length})),e}(),{onChange:function(){i&&i.apply(void 0,arguments),f.onChange&&f.onChange.apply(f,arguments)}}),s&&s.length?s.map((function(e){return h(e,r)})):function(e,t,a){return e&&""!==e?h({value:e,label:t},a):null}(n,n,r)),m.error&&m.touched?o.a.createElement(Fe.a,null,m.error):o.a.createElement(o.a.Fragment,null))},_e=Object(j.f)(Object(S.b)("store")(Object(S.c)((function(e){var t=we(),a=e.history,n=e.store.pages.point;return o.a.createElement("div",{className:t.root},o.a.createElement(M.a,{rounded:!0,className:t.container},o.a.createElement(ze.b,{onSubmit:function(e){n.reportingPoint(e,(function(e){e.data;a.push("/grazie")}))},validate:function(e){var t={};return e.name&&""!==e.name||(t.name="Campo obbligatorio"),e.address&&""!==e.address||(t.address="Campo obbligatorio"),e.pointType&&""!==e.pointType||(t.pointType="Campo obbligatorio"),t},mutators:{setLocation:function(e,t,a){var n=e[0];a.changeValue(t,"address",(function(){return n.address.description})),a.changeValue(t,"lat",(function(){return n.coords.lat})),a.changeValue(t,"lng",(function(){return n.coords.lng}))}},render:function(e){var a=e.values,n=e.form,i=e.handleSubmit;return o.a.createElement("form",{onSubmit:i},o.a.createElement(F.a,{container:!0,spacing:2},o.a.createElement(F.a,{item:!0,xs:12},o.a.createElement(P.a,{variant:"h3",className:t.title},"Segnala nuovo punto")),o.a.createElement(F.a,{item:!0,xs:12},o.a.createElement(ze.a,{name:"name",label:"Nome",component:We,fullWidth:!0})),o.a.createElement(F.a,{item:!0,xs:12},o.a.createElement(ze.a,{name:"address"},(function(e){var i=e.input,r=e.meta;return o.a.createElement(ue.a,Object.assign({},i,{meta:r,debounce:500,placeholder:"Inserisci indirizzo / Nome attivit\xe0",initialValue:a.address,renderSuggestions:function(e,a,n){return ge(t,0,a,n)},autocompletionRequest:{componentRestrictions:{country:"it"}},renderInput:function(e){return e.label=e.placeholder,e.fullWidth=!0,e.error=r.error&&r.touched,e.helperText=r.touched?r.error:"",delete e.placeholder,o.a.createElement(de.a,e)},onSelect:function(){var e=Object(se.a)(ce.a.mark((function e(t){var a,o;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ue.b)(t.place_id);case 3:return a=e.sent,e.next=6,Object(ue.c)(a[0]);case 6:o=e.sent,n.mutators.setLocation({address:t,coords:o}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()}))}))),o.a.createElement(F.a,{item:!0,xs:12},o.a.createElement(ze.a,{name:"tel",label:"Telefono",component:We,fullWidth:!0})),o.a.createElement(F.a,{item:!0,xs:12},o.a.createElement(ze.a,{name:"pointType",placeholder:"Categoria",component:Me,rowsData:[{label:"Cesto",value:"cesto"},{label:"Carrello",value:"carrello"},{label:"Libro",value:"libro"},{label:"Caff\xe8",value:"caffe"},{label:"Farmaco",value:"farmaco"},{label:"Punto di raccolta",value:"centro_raccolta"}],fullWidth:!0})),o.a.createElement(F.a,{item:!0,xs:12},o.a.createElement(ze.a,{name:"note",label:"Note",component:We,rows:5,multiline:!0,fullWidth:!0})),o.a.createElement(F.a,{item:!0,xs:12,className:t.submit},o.a.createElement(I.a,{color:"primary",variant:"contained",onClick:n.reset},"svuota"),o.a.createElement(I.a,{color:"secondary",variant:"contained",onClick:i,disabled:n.error},"INVIA"))))}})))})))),Le=Object(T.a)((function(e){return{root:{display:"flex",flexFlow:"column",justifyContent:"center",minHeight:"calc(100vh - 382px)"},container:{position:"relative",margin:"15px 30px",padding:15,color:"#757575"},title:{fontSize:24,textTransform:"uppercase",color:e.palette.primary.main,fontWeight:700,textAlign:"center"},submit:{marginTop:20,textAlign:"right","& > button":{margin:"0 5px",fontWeight:700}}}})),De=Object(j.f)(Object(S.b)("store")(Object(S.c)((function(e){var t=Le(),a=e.history;return o.a.createElement("div",{className:t.root},o.a.createElement("img",{src:"/grazie.svg"}),o.a.createElement(M.a,{rounded:!0,className:t.container},o.a.createElement(P.a,{className:t.title},"GRAZIE PER LA SEGNALAZIONE!"),o.a.createElement(F.a,{container:!0},o.a.createElement(F.a,{item:!0,xs:12,className:t.submit},o.a.createElement(I.a,{color:"primary",size:"small",variant:"contained",onClick:function(){return a.push("/")}},"Vai in home"),o.a.createElement(I.a,{color:"secondary",size:"small",variant:"contained",onClick:function(){return a.push("/point/reporting")}},"Segnala altro")))))})))),Ue=Object(T.a)((function(e){return{root:{display:"flex",flexFlow:"column",justifyContent:"center",minHeight:"calc(100vh - 382px)"},container:{position:"relative",margin:"15px 30px",padding:15,color:"#757575","& .selfie":{width:"100%"}},dropzone:{width:"100px!important",height:"100px!important",minHeight:"100px!important",backgroundColor:"".concat(e.palette.secondary.light,"!important"),border:"0!important",borderRadius:"100%",display:"flex",margin:"0 auto",position:"relative",alignItems:"center",justifyContent:"center","& > div > svg":{display:"none!important"},"& .imgUp":{width:40,height:40,marginTop:10,fill:e.palette.secondary.main},"& input":{width:"100%"}},title:{fontSize:24,textTransform:"uppercase",color:e.palette.primary.main,fontWeight:700,textAlign:"center"},subTitle:{marginTop:20,fontSize:18,fontWeight:700,color:e.palette.secondary.main,textAlign:"center"},submit:{marginTop:20,textAlign:"right","& > button":{margin:"0 5px",fontWeight:700}}}})),He=a(290),Ve=a(136),Ge=Object(j.f)(Object(S.b)("store")(Object(S.c)((function(e){var t=Ue(),a=e.history,i=e.store.pages.point,r=Object(n.useState)(null),l=Object(D.a)(r,2),c=l[0],s=l[1],m=Object(n.useState)(null),u=Object(D.a)(m,2),p=u[0],d=u[1];Object(n.useEffect)((function(){0===Object.keys(i.point).length&&a.push("/search"),i.getPoint(null,!1,(function(e){return d(e)}))}),[]);return o.a.createElement("div",{className:t.root},o.a.createElement(M.a,{rounded:!0,className:t.container},o.a.createElement(ze.b,{initialValues:{_id:p?p._id:""},onSubmit:function(e){i.saveDonation(e,(function(){a.push("/donations/grazie")}))},validate:function(){},render:function(e){e.values,e.form;var n=e.handleSubmit;return o.a.createElement(F.a,{container:!0},o.a.createElement(F.a,{item:!0,xs:12},c?o.a.createElement("img",{className:"selfie",src:c}):o.a.createElement(o.a.Fragment,null,o.a.createElement(Ve.a,{acceptedFiles:["image/jpeg","image/png","image/jpg"],maxFileSize:"25000000",dropzoneText:o.a.createElement(He.a,{className:"imgUp"}),dropzoneClass:t.dropzone,onChange:function(e){var t=e[0],a=new FileReader;a.readAsDataURL(t),a.onload=function(){i.setSelfie(a.result),i.setFrozenFile(t),s(a.result)}},filesLimit:1}),o.a.createElement(P.a,{className:t.subTitle},"Inserisci un selfie sospeso"))),o.a.createElement(F.a,{item:!0,xs:12},o.a.createElement(ze.a,{name:"name",label:"Nome",component:We,fullWidth:!0})),o.a.createElement(F.a,{item:!0,xs:12},o.a.createElement(ze.a,{name:"message",label:"Scrivi un pensiero di supporto",component:We,rows:5,multiline:!0,fullWidth:!0})),o.a.createElement(F.a,{item:!0,xs:12,className:t.submit},o.a.createElement(I.a,{color:"primary",size:"small",variant:"contained",onClick:function(){return a.push("/")}},"Vai in home"),o.a.createElement(I.a,{color:"secondary",size:"small",variant:"contained",onClick:n},"Conferma")))}})))})))),qe=Object(j.f)(Object(S.b)("store")(Object(S.c)((function(e){var t=Le(),a=e.history,i=e.store.pages.point;return Object(n.useEffect)((function(){0===Object.keys(i.point).length&&a.push("/search")}),[]),o.a.createElement("div",{className:t.root},o.a.createElement("img",{src:"/grazie.svg"}),o.a.createElement(M.a,{rounded:!0,className:t.container},o.a.createElement(P.a,{className:t.title},"GRAZIE PER LA DONAZIONE!"),o.a.createElement(F.a,{container:!0},o.a.createElement(F.a,{style:{marginBottom:20,textAlign:"center"},xs:12,item:!0},navigator.share?o.a.createElement(I.a,{variant:"contained",color:"secondary",onClick:function(){i.shareDonation()}},"Condividi"):null),o.a.createElement(F.a,{item:!0,xs:12,className:t.submit},o.a.createElement(I.a,{color:"primary",size:"small",variant:"contained",onClick:function(){return a.push("/")}},"Vai in home")))))}))));var Ze,Je=Object(S.b)("store")(Object(S.c)((function(e){var t=[{path:"/",component:G},{path:"/search",component:ve},{path:"/map",component:ke},{path:"/point/reporting",component:_e},{path:"/point/:id",component:je},{path:"/grazie",component:De},{path:"/donations",component:Ge},{path:"/donations/grazie",component:qe}].map((function(e,t){var a=e.path,n=e.component;return o.a.createElement(j.a,{exact:!0,path:a,component:n,key:t})}));return o.a.createElement(w.a,null,o.a.createElement(ie,null,o.a.createElement(j.c,null,t)))}))),Ke=a(137),Qe=C.create({utility:{snackbar:{},typePoint:{}},pages:{home:{},point:{},map:{}}},Ze);Ke.a.initialize("UA-1091978-71"),r.a.render(o.a.createElement(S.a,{store:Qe},o.a.createElement(s.a,{theme:p},o.a.createElement(m.a,null),o.a.createElement(Je,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");l?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):c(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):c(t,e)}))}}()}},[[153,1,2]]]);
//# sourceMappingURL=main.33596a4d.chunk.js.map